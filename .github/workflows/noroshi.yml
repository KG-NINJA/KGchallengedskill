name: Noroshi Revenue Pulse

on:
  schedule:
    - cron: '30 9 * * *'   # UTC9:30ÔºùÊó•Êú¨ÊôÇÈñì18:30
  workflow_dispatch:

jobs:
  pulse:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Generate NOROSHI signal with random project intro
        run: |
          # üåü „É©„É≥„ÉÄ„É†„Å™‰∏ÄË®Ä„É°„ÉÉ„Çª„Éº„Ç∏‰∏ÄË¶ß
          messages=(
            "üåø Jungle NDVI Explorer ‚Äî Geospatial AI experiment"
            "üêï Fuwa-Coco Object Detection ‚Äî Real-time outdoor alerts"
            "üõ∞Ô∏è Kyoto Voxel Simulator ‚Äî 3D city and heritage mapping"
            "üöá Osaka Midosuji Subway Sim ‚Äî Interactive urban mobility"
            "ü§ñ Vibe Voice Coding ‚Äî Speak to prototype instantly"
            "üî• AutoKaggler ‚Äî Rapid Kaggle pipeline generator"
            "üåê NOROSHI Pulse ‚Äî AI universe signal project"
          )
          random_index=$(($RANDOM % ${#messages[@]}))
          random_message=${messages[$random_index]}

          {
            echo "Last signal: $(date -u)"
            echo ""
            echo "üöÄ **KG-NINJA | AI √ó Geospatial √ó Automation**"
            echo "Building autonomous AI pipelines and experimental prototypes."
            echo ""
            echo "üìù ${random_message}"
            echo ""
            echo "‚òï [Buy Me a Coffee](https://www.buymeacoffee.com/kgninja)"
            echo "üåê [Linktree - All Links](https://linktr.ee/kgkk)"
            echo "üíº [LancersÔºà„É©„É≥„Çµ„Éº„Ç∫Ôºâ](https://www.lancers.jp/profile/KGKGKG)"
            echo ""
            echo "#NOROSHI #KGNINJA #AIPulsar"
          } > NOROSHI_SIGNAL.md

      - name: Generate index.html with logo and tweet button
        run: |
          # HTML„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíÁîüÊàê
          cat > index.html <<'EOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="UTF-8">
            <title>NOROSHI Pulse</title>
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <style>
              body {
                font-family: system-ui, sans-serif;
                max-width: 800px;
                margin: 2rem auto;
                padding: 1rem;
                line-height: 1.6;
              }
              .logo {
                display: block;
                margin: 0 auto 1rem;
                max-width: 160px;
              }
              pre {
                background: #f5f5f5;
                padding: 1rem;
                border-radius: 8px;
                white-space: pre-wrap;
              }
              .tweet-btn {
                display: inline-block;
                background: #1da1f2;
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 4px;
                text-decoration: none;
                margin-top: 1rem;
              }
              .tweet-btn:hover {
                background: #0d8de1;
              }
            </style>
          </head>
          <body>
            <img src="https://github.com/KG-NINJA/KGchallengedskill/raw/main/logo.png" alt="KG-NINJA Logo" class="logo">
            <h1>üåå NOROSHI Daily Pulse</h1>
            <pre>
          EOF

          # NOROSHI_SIGNAL.md „ÅÆÂÜÖÂÆπ„Çí HTML „Å´ÊåøÂÖ•
          cat NOROSHI_SIGNAL.md >> index.html

          cat >> index.html <<'EOF'
            </pre>
            <a class="tweet-btn" 
               href="https://twitter.com/intent/tweet?text=%F0%9F%8C%8C+%23KGNINJA+%23AIPulsar+%F0%9F%9B%B8+https%3A%2F%2Fkg-ninja.github.io%2FKGchallengedskill%2F" 
               target="_blank">
              üê¶ Tweet This Signal
            </a>
          </body>
          </html>
          EOF

      - name: Commit and push changes
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add NOROSHI_SIGNAL.md index.html
          git commit -m "üì° Noroshi signal update with HTML template" || exit 0
          git push
